{
  "$schema": "https://developer.microsoft.com/json-schemas/fabric/item/report/definition/reportExtension/1.0.0/schema.json",
  "name": "extension",
  "entities": [
    {
      "name": "fact_sales",
      "measures": [
        {
          "name": "Revenue",
          "dataType": "Double",
          "expression": "SUMX(fact_sales,fact_sales[Quantity]*fact_sales[UnitPrice])",
          "formatString": "#,0.00"
        },
        {
          "name": "Qunatity",
          "dataType": "Double",
          "expression": "SUM(fact_sales[Quantity])"
        },
        {
          "name": "Revenue YTD",
          "dataType": "Double",
          "expression": "\nCALCULATE(\n    [Revenue],\n    DATESYTD( dim_date[FullDate] )\n)\n",
          "formatString": "#,0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              }
            ]
          }
        },
        {
          "name": "Revenue PY",
          "dataType": "Double",
          "expression": "\nCALCULATE(\n    [Revenue],\n    SAMEPERIODLASTYEAR( dim_date[FullDate] )\n)\n",
          "formatString": "#,0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              }
            ]
          }
        },
        {
          "name": "Revenue YTD PY",
          "dataType": "Double",
          "expression": "\nCALCULATE(\n    [Revenue],\n    DATESYTD( dim_date[FullDate] ),\n    SAMEPERIODLASTYEAR( dim_date[FullDate] )\n)\n",
          "formatString": "#,0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              }
            ]
          }
        },
        {
          "name": "Revenue YoY Δ",
          "dataType": "Double",
          "expression": "\n[Revenue] - [Revenue PY]\n",
          "formatString": "0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              },
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue PY"
              }
            ]
          }
        },
        {
          "name": "Revenue YoY %",
          "dataType": "Double",
          "expression": "\nDIVIDE(\n    [Revenue YoY Δ],\n    [Revenue PY]\n)\n",
          "formatString": "0.0\\ %;-0.0\\ %;0.0\\ %",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue YoY Δ"
              },
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue PY"
              }
            ]
          }
        },
        {
          "name": "Revenue Rolling 12M",
          "dataType": "Double",
          "expression": "\nCALCULATE(\n    [Revenue],\n    DATESINPERIOD(\n        dim_date[FullDate],\n        MAX( dim_date[FullDate] ),\n        -12,\n        MONTH\n    )\n)\n",
          "formatString": "#,0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              }
            ]
          }
        },
        {
          "name": "Revenue Rolling 12M PY",
          "dataType": "Double",
          "expression": "\nCALCULATE(\n    [Revenue Rolling 12M],\n    DATEADD( dim_date[FullDate], -1, YEAR )\n)\n",
          "formatString": "#,0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue Rolling 12M"
              }
            ]
          }
        },
        {
          "name": "Revenue Rolling 12M YoY Δ",
          "dataType": "Double",
          "expression": "\n[Revenue Rolling 12M] - [Revenue Rolling 12M PY]\n",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue Rolling 12M"
              },
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue Rolling 12M PY"
              }
            ]
          }
        },
        {
          "name": "Revenue Rolling 12M YoY %",
          "dataType": "Double",
          "expression": "\nDIVIDE(\n    [Revenue Rolling 12M YoY Δ],\n    [Revenue Rolling 12M PY]\n)\n",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue Rolling 12M YoY Δ"
              },
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue Rolling 12M PY"
              }
            ]
          }
        },
        {
          "name": "Δ Revenue PY",
          "dataType": "Double",
          "expression": "\n[Revenue] - [Revenue PY]\n",
          "formatString": "#,0.00",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              },
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue PY"
              }
            ]
          }
        },
        {
          "name": "Δ Revenue PY %",
          "dataType": "Double",
          "expression": "\nDIVIDE(\n    [Δ Revenue PY],\n    [Revenue PY]\n)\n",
          "formatString": "0.0\\ %;-0.0\\ %;0.0\\ %",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Δ Revenue PY"
              },
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue PY"
              }
            ]
          }
        },
        {
          "name": "Color Δ Revenue PY",
          "dataType": "Text",
          "expression": "\nIF(\n    [Δ Revenue PY] < 0,\n    \"#FF0000\",   // rot\n    \"#00B050\"    // grün\n)\n",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Δ Revenue PY"
              }
            ]
          }
        },
        {
          "name": "Revenue Bars",
          "dataType": "Double",
          "expression": "[Revenue]",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Revenue"
              }
            ]
          }
        },
        {
          "name": "Δ Revenue PY % Bars",
          "dataType": "Double",
          "expression": "[Δ Revenue PY %]",
          "references": {
            "measures": [
              {
                "schema": "extension",
                "entity": "fact_sales",
                "name": "Δ Revenue PY %"
              }
            ]
          }
        }
      ]
    }
  ]
}